{% extends "base.html" %}
{% load static %}
{% block title %}Repositorio{% endblock %}
{% block content %}
<h1>Archivos del Repositorio</h1>
{% if archivos_usuario %}
<table class="table">
  <thead>
    <tr>
      <th scope="col">Archivo .txt</th>
      <th scope="col">Audio</th>
    </tr>
  </thead>
  <tbody id="fileList">
    {% for archivo in archivos_usuario %}
    <tr>
      <td><a href="#" onclick="showFileContent('{{ archivo.archivo_txt.url }}')">{{ archivo.archivo_txt.name }}</a></td>
      <td><a href="#" onclick="playAudio('{{ archivo.archivo_audio.url }}')">{{ archivo.archivo_audio.name }}</a></td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>No hay archivos en el repositorio.</p>
{% endif %}

<script>
  function showFileContent(fileUrl) {
    fetch(fileUrl)
      .then(response => response.text())
      .then(data => {
        alert(data); // Aquí podrías mostrar el contenido en un modal o en un área específica de la página
      })
      .catch(error => {
        console.error('Error al cargar el contenido del archivo:', error);
      });
  }

  function playAudio(audioUrl) {
    const audio = new Audio(audioUrl);
    audio.play();
  }
</script>
{% endblock %}
